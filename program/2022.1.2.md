# 咕咕了几天，但思路还是得分享

这几天略感寂寞，于是乎没有爬起来把重构干下去的动力...

果然我还是有点懒惰性情的呢，得加把劲把这个支持模组的重构完成才行啊！

目前我分享一下我实现模组功能的想法吧：

+ 模组由三个部分构成：resource ( 资源文件 )、script ( lua 脚本 )、data ( JSON 数据 )

+ 每一个模组都是一个文件夹，游戏启动时会扫描模组路径下的每一个模组，根据他们的内容实例化出来几个对象，譬如说实例化出来一个生物，游戏内生成生物的时候会直接复制这个对象。

+ 分离读取模组的方法和将模组处理成游戏数据的方法，这样就可以提供 `读取打包的模组` 和 `读取没有打包的模组` 两套 API，方便开发者在后一套 API 上进行调试。

+ 让 Aden 为 lua 脚本提供一套 API，让 lua 脚本只负责定义静态的变量和方法，并可读取修改 JSON 文件。

+ 让 Aden 可以访问 lua 脚本创建的 JSON 文件，并在客户端里可以对其作出修改。